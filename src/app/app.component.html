<div class="container mt-5">
  <div class="card shadow-lg p-4">
    <h1 class="text-center text-secondary">üìí Agenda de Contactos</h1>
    
    <div class="row justify-content-center">
      <div class="col-md-6">
        <form [formGroup]="formContacto" (ngSubmit)="onSubmit()">
          <div class="mb-3">
            <label class="form-label fw-bold">Nombre:</label>
            <input type="text" class="form-control" formControlName="nombre" placeholder="Ingrese el nombre" />
            @if(enviado && formContacto.get('nombre')?.errors?.['required']){
              <div class="text-danger">Este campo es obligatorio</div>
            }
            @if(enviado && formContacto.get('nombre')?.errors?.['minlength']){
              <div class="text-danger">El nombre debe tener al menos 10 caracteres</div>
            }
          </div>
          
          <div class="mb-3">
            <label class="form-label fw-bold">Tel√©fono:</label>
            <input type="text" class="form-control" formControlName="telefono" placeholder="Ingrese el tel√©fono" />
            @if(enviado && formContacto.get('telefono')?.errors?.['required']){
              <div class="text-danger">Este campo es obligatorio</div>
            }
            @if(enviado && formContacto.get('telefono')?.errors?.['pattern']){
              <div class="text-danger">Debe ser un n√∫mero v√°lido (10 d√≠gitos)</div>
            }
          </div>

          <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" formControlName="favorito" />
            <label class="form-check-label">Marcar como contacto favorito</label>
          </div>

          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary">Guardar</button>
            @if (modoEdicion) {
              <button type="button" class="btn btn-warning" (click)="modificarContacto()">Actualizar</button>
            }
          </div>
        </form>
      </div>
    </div>
  </div>

  <hr class="my-4" />

  <h2 class="text-center text-success">üìã Lista de Contactos</h2>
  @if(contactos.length > 0){
    <div class="table-responsive">
      <table class="table table-striped table-hover text-center">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Tel√©fono</th>
            <th>Favorito</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (contacto of contactos; track $index) {
            <tr>
              <td>{{ $index + 1 }}</td>
              <td>{{ contacto.nombre }}</td>
              <td>{{ contacto.telefono }}</td>
              <td>{{ contacto.favorito ? '‚≠ê S√≠' : '‚ùå No' }}</td>
              <td>
                <button class="btn btn-sm btn-warning" (click)="seleccionarContacto(contacto, $index)">Editar</button>
                <button class="btn btn-sm btn-danger" (click)="eliminarContacto($index)">Eliminar</button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
  
  @if(contactos.length === 0){
    <p class="text-center text-muted">No hay contactos en la agenda.</p>
  }
</div>

<router-outlet></router-outlet>
